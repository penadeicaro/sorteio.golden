<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Sorteio ao Vivo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: #000;
      color: #fff;
      height: 100vh;
      overflow: hidden;
    }

    h1 {
      text-align: center;
      padding: 24px 0 12px;
      font-size: 42px;
      font-weight: 700;
    }

    main {
      display: flex;
      height: calc(100vh - 90px);
    }

    /* LISTA */
    .lista-container {
      flex: 1;
      overflow-y: auto;
      scroll-behavior: smooth;
      padding-top: 40vh;
      padding-bottom: 40vh;
    }

    .participante {
      text-align: center;
      padding: 16px 0;
      font-size: 32px;
      transform: scale(0.75);
      opacity: 0.3;
      color: #aaa;
      transition:
        transform 0.15s linear,
        opacity 0.15s linear,
        color 0.15s linear;
      will-change: transform, opacity;
    }

    /* SORTEIO */
    .sorteio {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      transform: translateY(-40px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.9s ease-out;
    }

    .sorteio.ativo {
      opacity: 1;
      pointer-events: auto;
    }

    .nome-sorteado {
      font-size: 64px;
      font-weight: 800;
      color: #fbba16;
      margin-bottom: 32px;
      text-align: center;
    }

    button {
      padding: 16px 32px;
      font-size: 20px;
      font-weight: 600;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      background: #fbba16;
      color: #000;
      transition: opacity 0.8s ease-out;
    }
  </style>
</head>

<body>

  <h1>Sorteio ao Vivo</h1>

  <main>
    <!-- LISTA -->
    <div class="lista-container" id="lista">
      <div class="participante">Ana Paula</div>
      <div class="participante">Bruno Silva</div>
      <div class="participante">Carlos Eduardo</div>
      <div class="participante">Daniela Rocha</div>
      <div class="participante">Eduardo Lima</div>
      <div class="participante">Fernanda Alves</div>
      <div class="participante">Gabriel Costa</div>
      <div class="participante">Helena Martins</div>
      <div class="participante">Igor Santos</div>
      <div class="participante">Juliana Pires</div>
      <div class="participante">Lucas Nogueira</div>
      <div class="participante">Mariana Teixeira</div>
      <div class="participante">Rafael Azevedo</div>
      <div class="participante">Renata Farias</div>
      <div class="participante">Thiago Barros</div>
    </div>

    <!-- SORTEIO -->
    <div class="sorteio" id="sorteio">
      <div class="nome-sorteado" id="nomeSorteado">â€”</div>
      <button id="btnSortear">Sortear</button>
    </div>
  </main>

  <script>
    const lista = document.getElementById("lista");
    const participantes = document.querySelectorAll(".participante");
    const sorteio = document.getElementById("sorteio");
    const nomeSorteado = document.getElementById("nomeSorteado");
    const btn = document.getElementById("btnSortear");

    function atualizarFoco() {
      const centro = window.innerHeight / 2;

      participantes.forEach(item => {
        const rect = item.getBoundingClientRect();
        const itemCentro = rect.top + rect.height / 2;
        const distancia = Math.abs(itemCentro - centro);

        const maxDist = centro * 0.9;
        const normalizado = Math.min(distancia / maxDist, 1);
        const intensidade = 1 - normalizado;

        const scale = 0.75 + intensidade * 0.75;
        const opacity = 0.3 + intensidade * 0.7;

        let color = "#aaa";
        if (intensidade > 0.66) color = "#fbba16";
        else if (intensidade > 0.33) color = "#fff";

        item.style.transform = `scale(${scale})`;
        item.style.opacity = opacity;
        item.style.color = color;
      });
    }

    lista.addEventListener("scroll", atualizarFoco);
    window.addEventListener("resize", atualizarFoco);
    atualizarFoco();

    function iniciarSorteio() {
      btn.style.opacity = 0;
      btn.style.pointerEvents = "none";

      sorteio.classList.add("ativo");

      const nomes = Array.from(participantes).map(p => p.textContent);
      const vencedor = nomes[Math.floor(Math.random() * nomes.length)];

      setTimeout(() => {
        nomeSorteado.textContent = vencedor;
      }, 400);
    }

    btn.addEventListener("click", iniciarSorteio);
  </script>

</body>
</html>
